import{D as Xt,b as Yt}from"./DashWrapper.5f218d38.js";import{s as se,f as J,E as Jt,r as g,n as Qt,_ as Zt,b as f,o as er,q as tr,A as Le,u as ke,d as Be,j as _,F as be,B as ct}from"./index.97f28ec7.js";import{u as Pt,T as Ge,A as ae,F as rr,S as nr,D as ir,a as ar,b as or,c as sr,d as lr}from"./StyledDialog.0bd84b8e.js";import{u as nt,G as z,b as ut,a as cr,A as jt,h as ur,T as Oe}from"./jsx-runtime_commonjs-proxy.6c505fe1.js";import{L as Me,d as it}from"./Save.20651d67.js";import{g as fr,S as oe,a as pr}from"./Delete.d506a07b.js";import{c as dr,a as ft,b as mr,o as hr,P as pt}from"./object.8b4bb12d.js";import{P as w}from"./index.bb0a0649.js";import"./upperFirst.25dfe932.js";const gr=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],vr=e=>{const{absolute:t,children:r,classes:n,flexItem:a,light:i,orientation:s,textAlign:o,variant:c}=e;return tr({root:["root",t&&"absolute",c,i&&"light",s==="vertical"&&"vertical",a&&"flexItem",r&&"withChildren",r&&s==="vertical"&&"withChildrenVertical",o==="right"&&s!=="vertical"&&"textAlignRight",o==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},fr,n)},br=se("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>J({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Jt(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>J({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>J({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>J({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),yr=se("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>J({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),xr=g.exports.forwardRef(function(t,r){const n=Qt({props:t,name:"MuiDivider"}),{absolute:a=!1,children:i,className:s,component:o=i?"div":"hr",flexItem:c=!1,light:l=!1,orientation:m="horizontal",role:d=o!=="hr"?"separator":void 0,textAlign:x="center",variant:v="fullWidth"}=n,p=Zt(n,gr),b=J({},n,{absolute:a,component:o,flexItem:c,light:l,orientation:m,role:d,textAlign:x,variant:v}),y=vr(b);return f(br,J({as:o,className:er(y.root,s),role:d,ref:r,ownerState:b},p,{children:i?f(yr,{className:y.wrapper,ownerState:b,children:i}):null}))});var Xe=xr;const wr="Account",Se={helper:`${wr}-helper`},Dr=se("form")(({theme:e})=>({width:"100%",display:"flex",flexDirection:"column",gap:"2rem",marginTop:"2rem",marginBottom:"2rem",[`&. ${Se.helper}`]:{color:e.palette.text.primary}})),Er=e=>{var L,F,T;const{user:t,updateUser:r}=g.exports.useContext(Le),n=ke(),a=Be(),i=nt("(max-width: 900px)"),[s,o]=g.exports.useState(!1),[c,l]=g.exports.useState(!1),[m,d]=g.exports.useState(!1);t||n("/",{state:{from:a}});const{register:x,handleSubmit:v,formState:{errors:p}}=Pt({mode:"onBlur",defaultValues:{firstName:t==null?void 0:t.firstName,lastName:t==null?void 0:t.lastName,email:t==null?void 0:t.email}}),b=async j=>{if(o(!0),!t){n("/",{state:{from:a}});return}try{await r(j,t==null?void 0:t._id),d(!0)}catch(k){console.error({error:k}),l(!0)}finally{o(!1)}},y=(j,k)=>{k!=="clickaway"&&l(!1)},D=(j,k)=>{k!=="clickaway"&&d(!1)};return _(be,{children:[_(Dr,{onSubmit:v(b),children:[_(z,{container:!0,children:[f(z,{item:!0,xs:12,md:6,sx:{paddingRight:i?"":".5rem",marginBottom:i?"2rem":""},children:f(Ge,{...x("firstName",{required:{value:!0,message:"Le pr\xE9nom est obligatoire"},validate:ut||"Le pr\xE9nom contient des caract\xE8res sp\xE9ciaux non autoris\xE9s"}),helperText:p.firstName&&((L=p.firstName)==null?void 0:L.message),FormHelperTextProps:{className:Se.helper},fullWidth:!0,label:"Pr\xE9nom",type:"text",color:"info",variant:"filled",required:!0,defaultValue:t==null?void 0:t.firstName})}),f(z,{item:!0,xs:12,md:6,paddingLeft:i?"":".5rem",children:f(Ge,{...x("lastName",{required:{value:!0,message:"Le nom est obligatoire"},validate:j=>ut(j)||"Le nom contient des caract\xE8res sp\xE9ciaux non autoris\xE9s"}),helperText:p.lastName&&((F=p.lastName)==null?void 0:F.message),FormHelperTextProps:{className:Se.helper},label:"Nom",type:"text",color:"info",variant:"filled",required:!0,fullWidth:!0,defaultValue:t==null?void 0:t.lastName})})]}),f(z,{item:!0,xs:12,children:f(Ge,{...x("email",{required:{value:!0,message:"L'email est obligatoire"},validate:cr||"Vous devez saisir un email valide"}),defaultValue:t==null?void 0:t.email,helperText:p.email&&((T=p.email)==null?void 0:T.message),FormHelperTextProps:{className:Se.helper},color:"info",type:"email",label:"Email",variant:"filled",required:!0,fullWidth:!0})}),f(z,{item:!0,xs:12,display:"flex",justifyContent:"end",children:f(Me,{loading:s,type:"submit",loadingPosition:"start",startIcon:f(it,{}),variant:"contained",color:"info",children:"Enregistrer les modifications"})})]}),f(oe,{open:m,autoHideDuration:6e3,onClose:D,children:f(ae,{onClose:D,severity:"success",sx:{width:"100%"},children:"Vos informations ont bien \xE9t\xE9 mises \xE0 jour."})}),f(oe,{open:c,autoHideDuration:6e3,onClose:y,children:f(ae,{onClose:y,severity:"error",sx:{width:"100%"},children:"Un probl\xE8me est survenu, veuillez r\xE9essayer."})})]})},Ar="Password",Cr={helper:`${Ar}-helper`},Or=se("form")(({theme:e})=>({width:"100%",display:"flex",flexDirection:"column",gap:"2rem",marginTop:"2rem",marginBottom:"2rem",[`&. ${Cr.helper}`]:{color:e.palette.text.primary}})),Fr=e=>{var D,L;const{user:t,updatePassword:r}=g.exports.useContext(Le),n=ke(),a=Be(),i=nt("(max-width: 900px)"),[s,o]=g.exports.useState(!1),[c,l]=g.exports.useState(!1),[m,d]=g.exports.useState(!1),x=dr().shape({password:ft().required("Le mot de passe est obligatoire").min(6,"Le mot de passe doit contenir au moins 6 caract\xE8res"),confirmPassword:ft().required("Le mot de passe est obligatoire").oneOf([mr("password")],"Les mots de passe ne sont pas identiques")}),v=Pt({mode:"onBlur",resolver:hr(x)}),p=async F=>{if(o(!0),!t){n("/",{state:{from:a}});return}try{await r({password:F.password},t._id)?l(!0):d(!0)}catch(T){console.error({error:T}),d(!0)}finally{o(!1)}},b=(F,T)=>{T!=="clickaway"&&d(!1)},y=(F,T)=>{T!=="clickaway"&&l(!1)};return _(be,{children:[f(rr,{...v,children:_(Or,{onSubmit:v.handleSubmit(p),children:[_(z,{container:!0,children:[f(z,{item:!0,xs:12,md:6,sx:{paddingRight:i?"":".5rem",marginBottom:i?"2rem":""},children:f(pt,{name:"password",color:"info",defaultValue:"",error:v.formState.errors.password!==void 0,errorMessage:(D=v.formState.errors.password)==null?void 0:D.message,fullWidth:!0,id:"new-password",label:"Nouveau mot de passe"})}),f(z,{item:!0,xs:12,md:6,paddingLeft:i?"":".5rem",children:f(pt,{name:"confirmPassword",color:"info",defaultValue:"",error:v.formState.errors.confirmPassword!==void 0,errorMessage:(L=v.formState.errors.confirmPassword)==null?void 0:L.message,fullWidth:!0,id:"confirm-new-password",label:"Confirmez le nouveau mot de passe"})})]}),f(z,{item:!0,xs:12,display:"flex",justifyContent:"end",children:f(Me,{loading:s,type:"submit",loadingPosition:"start",startIcon:f(it,{}),variant:"contained",color:"info",children:"Enregistrer le nouveau mot de passe"})})]})}),f(oe,{open:c,autoHideDuration:6e3,onClose:y,children:f(ae,{onClose:y,severity:"success",sx:{width:"100%"},children:"Votre mot de passe a bien \xE9t\xE9 mis \xE0 jour."})}),f(oe,{open:m,autoHideDuration:6e3,onClose:b,children:f(ae,{onClose:b,severity:"error",sx:{width:"100%"},children:"Un probl\xE8me est survenu, veuillez r\xE9essayer."})})]})},Tr=e=>{const{user:t,deleteUser:r,logout:n}=g.exports.useContext(Le),a=ke(),i=Be(),[s,o]=g.exports.useState(!1),[c,l]=g.exports.useState(!1),[m,d]=g.exports.useState(!1);return _(be,{children:[f("div",{style:{display:"flex",justifyContent:"end",marginBottom:"1rem",marginTop:"1rem"},children:f(ct,{onClick:()=>o(!0),variant:"contained",color:"info",startIcon:f(pr,{}),children:"Je supprime mon compte"})}),_(nr,{open:s,setOpen:o,labelledby:"delete account",children:[f(ir,{id:"delete-account",children:"\xCAtes vous s\xFBr de vouloir supprimer votre compte"}),f(ar,{children:f(or,{children:"Votre compte sera d\xE9finitivement supprim\xE9 et ne pourra pas \xEAtre r\xE9cupr\xE9. Toutes vos todos seront \xE9galement supprim\xE9s."})}),_(sr,{children:[m&&f(lr,{severity:"error",onClose:()=>d(!1),children:"Un probl\xE8me est survenu, veuillez r\xE9essayer."}),f(ct,{autoFocus:!0,disabled:c,color:"info",onClick:p=>{o(!1)},children:"Annuler"}),f(Me,{loading:c,onClick:async p=>{if(l(!0),!t){a("/",{state:{from:i}});return}try{if((await r(t._id)).nDeleted>0){n(),a("/");return}else throw new Error("Le compte n'a pas pu \xEAtre supprim\xE9")}catch(b){console.error({error:b}),d(!0)}finally{l(!1)}},color:"info",autoFocus:!0,children:"Supprimer"})]})]})]})};function le(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(m){try{l(n.next(m))}catch(d){s(d)}}function c(m){try{l(n.throw(m))}catch(d){s(d)}}function l(m){m.done?i(m.value):a(m.value).then(o,c)}l((n=n.apply(e,t||[])).next())})}function ce(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(m){return c([l,m])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],a=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function mt(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Sr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ye(e,t){var r=Pr(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Pr(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),a=Sr.get(n);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var jr=[".DS_Store","Thumbs.db"];function Rr(e){return le(this,void 0,void 0,function(){return ce(this,function(t){return Pe(e)&&Ir(e.dataTransfer)?[2,Br(e.dataTransfer,e.type)]:_r(e)?[2,Lr(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,kr(e)]:[2,[]]})})}function Ir(e){return Pe(e)}function _r(e){return Pe(e)&&Pe(e.target)}function Pe(e){return typeof e=="object"&&e!==null}function Lr(e){return Je(e.target.files).map(function(t){return ye(t)})}function kr(e){return le(this,void 0,void 0,function(){var t;return ce(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return ye(n)})]}})})}function Br(e,t){return le(this,void 0,void 0,function(){var r,n;return ce(this,function(a){switch(a.label){case 0:return e.items?(r=Je(e.items).filter(function(i){return i.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(Mr))]):[3,2];case 1:return n=a.sent(),[2,ht(Rt(n))];case 2:return[2,ht(Je(e.files).map(function(i){return ye(i)}))]}})})}function ht(e){return e.filter(function(t){return jr.indexOf(t.name)===-1})}function Je(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function Mr(e){if(typeof e.webkitGetAsEntry!="function")return gt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?It(t):gt(e)}function Rt(e){return e.reduce(function(t,r){return mt(mt([],dt(t),!1),dt(Array.isArray(r)?Rt(r):[r]),!1)},[])}function gt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=ye(t);return Promise.resolve(r)}function zr(e){return le(this,void 0,void 0,function(){return ce(this,function(t){return[2,e.isDirectory?It(e):$r(e)]})})}function It(e){var t=e.createReader();return new Promise(function(r,n){var a=[];function i(){var s=this;t.readEntries(function(o){return le(s,void 0,void 0,function(){var c,l,m;return ce(this,function(d){switch(d.label){case 0:if(o.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return c=d.sent(),r(c),[3,4];case 3:return l=d.sent(),n(l),[3,4];case 4:return[3,6];case 5:m=Promise.all(o.map(zr)),a.push(m),i(),d.label=6;case 6:return[2]}})})},function(o){n(o)})}i()})}function $r(e){return le(this,void 0,void 0,function(){return ce(this,function(t){return[2,new Promise(function(r,n){e.file(function(a){var i=ye(a,e.fullPath);r(i)},function(a){n(a)})})]})})}var Ur=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return r.some(function(s){var o=s.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?i===o.replace(/\/.*$/,""):a===o})}return!0};function vt(e){return Nr(e)||Hr(e)||Lt(e)||Wr()}function Wr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nr(e){if(Array.isArray(e))return Qe(e)}function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bt(Object(r),!0).forEach(function(n){_t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e,t){return qr(e)||Vr(e,t)||Lt(e,t)||Kr()}function Kr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(e,t){if(!!e){if(typeof e=="string")return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}}function Qe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,s,o;try{for(r=r.call(e);!(a=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function qr(e){if(Array.isArray(e))return e}var Gr="file-invalid-type",Xr="file-too-large",Yr="file-too-small",Jr="too-many-files",Qr=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Gr,message:"File type must be ".concat(r)}},xt=function(t){return{code:Xr,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},wt=function(t){return{code:Yr,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Zr={code:Jr,message:"Too many files"};function kt(e,t){var r=e.type==="application/x-moz-file"||Ur(e,t);return[r,r?null:Qr(t)]}function Bt(e,t,r){if(Y(e.size))if(Y(t)&&Y(r)){if(e.size>r)return[!1,xt(r)];if(e.size<t)return[!1,wt(t)]}else{if(Y(t)&&e.size<t)return[!1,wt(t)];if(Y(r)&&e.size>r)return[!1,xt(r)]}return[!0,null]}function Y(e){return e!=null}function en(e){var t=e.files,r=e.accept,n=e.minSize,a=e.maxSize,i=e.multiple,s=e.maxFiles,o=e.validator;return!i&&t.length>1||i&&s>=1&&t.length>s?!1:t.every(function(c){var l=kt(c,r),m=ve(l,1),d=m[0],x=Bt(c,n,a),v=ve(x,1),p=v[0],b=o?o(c):null;return d&&p&&!b})}function je(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Fe(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Dt(e){e.preventDefault()}function tn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function rn(e){return e.indexOf("Edge/")!==-1}function nn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return tn(e)||rn(e)}function U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return t.some(function(o){return!je(n)&&o&&o.apply(void 0,[n].concat(i)),je(n)})}}function an(){return"showOpenFilePicker"in window}function on(e){if(Y(e)){var t=Object.entries(e).filter(function(r){var n=ve(r,2),a=n[0],i=n[1],s=!0;return Mt(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(i)||!i.every(zt))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(r,n){var a=ve(n,2),i=a[0],s=a[1];return yt(yt({},r),{},_t({},i,s))},{});return[{accept:t}]}return e}function sn(e){if(Y(e))return Object.entries(e).reduce(function(t,r){var n=ve(r,2),a=n[0],i=n[1];return[].concat(vt(t),[a],vt(i))},[]).filter(function(t){return Mt(t)||zt(t)}).join(",")}function ln(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function cn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Mt(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function zt(e){return/^.*\.[\w]+$/.test(e)}var un=["children"],fn=["open"],pn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],dn=["refKey","onChange","onClick"];function mn(e){return vn(e)||gn(e)||$t(e)||hn()}function hn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gn(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vn(e){if(Array.isArray(e))return Ze(e)}function Ye(e,t){return xn(e)||yn(e,t)||$t(e,t)||bn()}function bn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){if(!!e){if(typeof e=="string")return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(e,t)}}function Ze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yn(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,s,o;try{for(r=r.call(e);!(a=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function xn(e){if(Array.isArray(e))return e}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Et(Object(r),!0).forEach(function(n){et(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re(e,t){if(e==null)return{};var r=wn(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function wn(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var at=g.exports.forwardRef(function(e,t){var r=e.children,n=Re(e,un),a=Wt(n),i=a.open,s=Re(a,fn);return g.exports.useImperativeHandle(t,function(){return{open:i}},[i]),f(be,{children:r(E(E({},s),{},{open:i}))})});at.displayName="Dropzone";var Ut={disabled:!1,getFilesFromEvent:Rr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};at.defaultProps=Ut;at.propTypes={children:w.func,accept:w.objectOf(w.arrayOf(w.string)),multiple:w.bool,preventDropOnDocument:w.bool,noClick:w.bool,noKeyboard:w.bool,noDrag:w.bool,noDragEventsBubbling:w.bool,minSize:w.number,maxSize:w.number,maxFiles:w.number,disabled:w.bool,getFilesFromEvent:w.func,onFileDialogCancel:w.func,onFileDialogOpen:w.func,useFsAccessApi:w.bool,autoFocus:w.bool,onDragEnter:w.func,onDragLeave:w.func,onDragOver:w.func,onDrop:w.func,onDropAccepted:w.func,onDropRejected:w.func,onError:w.func,validator:w.func};var tt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Wt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=E(E({},Ut),e),r=t.accept,n=t.disabled,a=t.getFilesFromEvent,i=t.maxSize,s=t.minSize,o=t.multiple,c=t.maxFiles,l=t.onDragEnter,m=t.onDragLeave,d=t.onDragOver,x=t.onDrop,v=t.onDropAccepted,p=t.onDropRejected,b=t.onFileDialogCancel,y=t.onFileDialogOpen,D=t.useFsAccessApi,L=t.autoFocus,F=t.preventDropOnDocument,T=t.noClick,j=t.noKeyboard,k=t.noDrag,B=t.noDragEventsBubbling,C=t.onError,A=t.validator,H=g.exports.useMemo(function(){return sn(r)},[r]),ue=g.exports.useMemo(function(){return on(r)},[r]),Q=g.exports.useMemo(function(){return typeof y=="function"?y:At},[y]),K=g.exports.useMemo(function(){return typeof b=="function"?b:At},[b]),S=g.exports.useRef(null),R=g.exports.useRef(null),xe=g.exports.useReducer(Dn,tt),fe=Ye(xe,2),Z=fe[0],I=fe[1],ze=Z.isFocused,we=Z.isFileDialogActive,ee=g.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&D&&an()),te=function(){!ee.current&&we&&setTimeout(function(){if(R.current){var h=R.current.files;h.length||(I({type:"closeDialog"}),K())}},300)};g.exports.useEffect(function(){return window.addEventListener("focus",te,!1),function(){window.removeEventListener("focus",te,!1)}},[R,we,K,ee]);var W=g.exports.useRef([]),pe=function(h){S.current&&S.current.contains(h.target)||(h.preventDefault(),W.current=[])};g.exports.useEffect(function(){return F&&(document.addEventListener("dragover",Dt,!1),document.addEventListener("drop",pe,!1)),function(){F&&(document.removeEventListener("dragover",Dt),document.removeEventListener("drop",pe))}},[S,F]),g.exports.useEffect(function(){return!n&&L&&S.current&&S.current.focus(),function(){}},[S,L,n]);var $=g.exports.useCallback(function(u){C?C(u):console.error(u)},[C]),re=g.exports.useCallback(function(u){u.preventDefault(),u.persist(),Ae(u),W.current=[].concat(mn(W.current),[u.target]),Fe(u)&&Promise.resolve(a(u)).then(function(h){if(!(je(u)&&!B)){var O=h.length,P=O>0&&en({files:h,accept:H,minSize:s,maxSize:i,multiple:o,maxFiles:c,validator:A}),M=O>0&&!P;I({isDragAccept:P,isDragReject:M,isDragActive:!0,type:"setDraggedFiles"}),l&&l(u)}}).catch(function(h){return $(h)})},[a,l,$,B,H,s,i,o,c,A]),de=g.exports.useCallback(function(u){u.preventDefault(),u.persist(),Ae(u);var h=Fe(u);if(h&&u.dataTransfer)try{u.dataTransfer.dropEffect="copy"}catch{}return h&&d&&d(u),!1},[d,B]),me=g.exports.useCallback(function(u){u.preventDefault(),u.persist(),Ae(u);var h=W.current.filter(function(P){return S.current&&S.current.contains(P)}),O=h.indexOf(u.target);O!==-1&&h.splice(O,1),W.current=h,!(h.length>0)&&(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Fe(u)&&m&&m(u))},[S,m,B]),V=g.exports.useCallback(function(u,h){var O=[],P=[];u.forEach(function(M){var he=kt(M,H),ie=Ye(he,2),Ue=ie[0],We=ie[1],He=Bt(M,s,i),Ce=Ye(He,2),Ne=Ce[0],Ke=Ce[1],Ve=A?A(M):null;if(Ue&&Ne&&!Ve)O.push(M);else{var qe=[We,Ke];Ve&&(qe=qe.concat(Ve)),P.push({file:M,errors:qe.filter(function(Gt){return Gt})})}}),(!o&&O.length>1||o&&c>=1&&O.length>c)&&(O.forEach(function(M){P.push({file:M,errors:[Zr]})}),O.splice(0)),I({acceptedFiles:O,fileRejections:P,type:"setFiles"}),x&&x(O,P,h),P.length>0&&p&&p(P,h),O.length>0&&v&&v(O,h)},[I,o,H,s,i,c,x,v,p,A]),q=g.exports.useCallback(function(u){u.preventDefault(),u.persist(),Ae(u),W.current=[],Fe(u)&&Promise.resolve(a(u)).then(function(h){je(u)&&!B||V(h,u)}).catch(function(h){return $(h)}),I({type:"reset"})},[a,V,$,B]),G=g.exports.useCallback(function(){if(ee.current){I({type:"openDialog"}),Q();var u={multiple:o,types:ue};window.showOpenFilePicker(u).then(function(h){return a(h)}).then(function(h){V(h,null),I({type:"closeDialog"})}).catch(function(h){ln(h)?(K(h),I({type:"closeDialog"})):cn(h)?(ee.current=!1,R.current?(R.current.value=null,R.current.click()):$(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):$(h)});return}R.current&&(I({type:"openDialog"}),Q(),R.current.value=null,R.current.click())},[I,Q,K,D,V,$,ue,o]),De=g.exports.useCallback(function(u){!S.current||!S.current.isEqualNode(u.target)||(u.key===" "||u.key==="Enter"||u.keyCode===32||u.keyCode===13)&&(u.preventDefault(),G())},[S,G]),ot=g.exports.useCallback(function(){I({type:"focus"})},[]),st=g.exports.useCallback(function(){I({type:"blur"})},[]),lt=g.exports.useCallback(function(){T||(nn()?setTimeout(G,0):G())},[T,G]),ne=function(h){return n?null:h},$e=function(h){return j?null:ne(h)},Ee=function(h){return k?null:ne(h)},Ae=function(h){B&&h.stopPropagation()},Kt=g.exports.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=u.refKey,O=h===void 0?"ref":h,P=u.role,M=u.onKeyDown,he=u.onFocus,ie=u.onBlur,Ue=u.onClick,We=u.onDragEnter,He=u.onDragOver,Ce=u.onDragLeave,Ne=u.onDrop,Ke=Re(u,pn);return E(E(et({onKeyDown:$e(U(M,De)),onFocus:$e(U(he,ot)),onBlur:$e(U(ie,st)),onClick:ne(U(Ue,lt)),onDragEnter:Ee(U(We,re)),onDragOver:Ee(U(He,de)),onDragLeave:Ee(U(Ce,me)),onDrop:Ee(U(Ne,q)),role:typeof P=="string"&&P!==""?P:"presentation"},O,S),!n&&!j?{tabIndex:0}:{}),Ke)}},[S,De,ot,st,lt,re,de,me,q,j,k,n]),Vt=g.exports.useCallback(function(u){u.stopPropagation()},[]),qt=g.exports.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=u.refKey,O=h===void 0?"ref":h,P=u.onChange,M=u.onClick,he=Re(u,dn),ie=et({accept:H,multiple:o,type:"file",style:{display:"none"},onChange:ne(U(P,q)),onClick:ne(U(M,Vt)),tabIndex:-1},O,R);return E(E({},ie),he)}},[R,r,o,q,n]);return E(E({},Z),{},{isFocused:ze&&!n,getRootProps:Kt,getInputProps:qt,rootRef:S,inputRef:R,open:ne(G)})}function Dn(e,t){switch(t.type){case"focus":return E(E({},e),{},{isFocused:!0});case"blur":return E(E({},e),{},{isFocused:!1});case"openDialog":return E(E({},tt),{},{isFileDialogActive:!0});case"closeDialog":return E(E({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return E(E({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return E(E({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return E({},tt);default:return e}}function At(){}/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ct(Object(r),!0).forEach(function(n){Cn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function An(e,t,r){return t&&Ot(e.prototype,t),r&&Ot(e,r),e}function Cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(){return Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ie.apply(this,arguments)}var Ht={exports:{}};(function(e){typeof window!="undefined"&&function(t){var r=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),a=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,o=(n||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(c){var l,m,d,x,v,p,b,y,D;if(l=c.match(s),!l)throw new Error("invalid data URI");for(m=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),d=!!l[4],x=c.slice(l[0].length),d?v=atob(x):v=decodeURIComponent(x),p=new ArrayBuffer(v.length),b=new Uint8Array(p),y=0;y<v.length;y+=1)b[y]=v.charCodeAt(y);return n?new Blob([a?b:p],{type:m}):(D=new i,D.append(p),D.getBlob(m))};t.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(c,l,m){var d=this;setTimeout(function(){m&&r.toDataURL&&o?c(o(d.toDataURL(l,m))):c(d.mozGetAsFile("blob",l))})}:r.toDataURL&&o&&(r.msToBlob?r.toBlob=function(c,l,m){var d=this;setTimeout(function(){(l&&l!=="image/png"||m)&&r.toDataURL&&o?c(o(d.toDataURL(l,m))):c(d.msToBlob(l))})}:r.toBlob=function(c,l,m){var d=this;setTimeout(function(){c(o(d.toDataURL(l,m)))})})),e.exports?e.exports=o:t.dataURLtoBlob=o}(window)})(Ht);var On=Ht.exports,Fn=function(t){return typeof Blob=="undefined"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Ft={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Tn=typeof window!="undefined"&&typeof window.document!="undefined",N=Tn?window:{},_e=function(t){return t>0&&t<1/0},Sn=Array.prototype.slice;function Pn(e){return Array.from?Array.from(e):Sn.call(e)}var jn=/^image\/.+$/;function rt(e){return jn.test(e)}function Rn(e){var t=rt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var Nt=String.fromCharCode;function In(e,t,r){var n="",a;for(r+=t,a=t;a<r;a+=1)n+=Nt(e.getUint8(a));return n}var _n=N.btoa;function Ln(e,t){for(var r=[],n=8192,a=new Uint8Array(e);a.length>0;)r.push(Nt.apply(null,Pn(a.subarray(0,n)))),a=a.subarray(n);return"data:".concat(t,";base64,").concat(_n(r.join("")))}function kn(e){var t=new DataView(e),r;try{var n,a,i;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var s=t.byteLength,o=2;o+1<s;){if(t.getUint8(o)===255&&t.getUint8(o+1)===225){a=o;break}o+=1}if(a){var c=a+4,l=a+10;if(In(t,c,4)==="Exif"){var m=t.getUint16(l);if(n=m===18761,(n||m===19789)&&t.getUint16(l+2,n)===42){var d=t.getUint32(l+4,n);d>=8&&(i=l+d)}}}if(i){var x=t.getUint16(i,n),v,p;for(p=0;p<x;p+=1)if(v=i+p*12+2,t.getUint16(v,n)===274){v+=8,r=t.getUint16(v,n),t.setUint16(v,1,n);break}}}catch{r=1}return r}function Bn(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:n}}var Mn=/\.\d*(?:0|9){12}\d*$/;function Tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mn.test(e)?Math.round(e*t)/t:e}function ge(e){var t=e.aspectRatio,r=e.height,n=e.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=_e(n),s=_e(r);if(i&&s){var o=r*t;(a==="contain"||a==="none")&&o>n||a==="cover"&&o<n?r=n/t:n=r*t}else i?r=n/t:s&&(n=r*t);return{width:n,height:r}}var zn=N.ArrayBuffer,St=N.FileReader,X=N.URL||N.webkitURL,$n=/\.\w+$/,Un=N.Compressor,Wn=function(){function e(t,r){En(this,e),this.file=t,this.image=new Image,this.options=Te(Te({},Ft),r),this.aborted=!1,this.result=null,this.init()}return An(e,[{key:"init",value:function(){var r=this,n=this.file,a=this.options;if(!Fn(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=n.type;if(!rt(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!St){this.fail(new Error("The current browser does not support image compression."));return}if(zn||(a.checkOrientation=!1),X&&!a.checkOrientation)this.load({url:X.createObjectURL(n)});else{var s=new St,o=a.checkOrientation&&i==="image/jpeg";this.reader=s,s.onload=function(c){var l=c.target,m=l.result,d={};if(o){var x=kn(m);x>1||!X?(d.url=Ln(m,i),x>1&&Ie(d,Bn(x))):d.url=X.createObjectURL(n)}else d.url=m;r.load(d)},s.onabort=function(){r.fail(new Error("Aborted to read the image with FileReader."))},s.onerror=function(){r.fail(new Error("Failed to read the image with FileReader."))},s.onloadend=function(){r.reader=null},o?s.readAsArrayBuffer(n):s.readAsDataURL(n)}}},{key:"load",value:function(r){var n=this,a=this.file,i=this.image;i.onload=function(){n.draw(Te(Te({},r),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(new Error("Aborted to load the image."))},i.onerror=function(){n.fail(new Error("Failed to load the image."))},N.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(N.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=a.name,i.src=r.url}},{key:"draw",value:function(r){var n=this,a=r.naturalWidth,i=r.naturalHeight,s=r.rotate,o=s===void 0?0:s,c=r.scaleX,l=c===void 0?1:c,m=r.scaleY,d=m===void 0?1:m,x=this.file,v=this.image,p=this.options,b=document.createElement("canvas"),y=b.getContext("2d"),D=Math.abs(o)%180===90,L=(p.resize==="contain"||p.resize==="cover")&&_e(p.width)&&_e(p.height),F=Math.max(p.maxWidth,0)||1/0,T=Math.max(p.maxHeight,0)||1/0,j=Math.max(p.minWidth,0)||0,k=Math.max(p.minHeight,0)||0,B=a/i,C=p.width,A=p.height;if(D){var H=[T,F];F=H[0],T=H[1];var ue=[k,j];j=ue[0],k=ue[1];var Q=[A,C];C=Q[0],A=Q[1]}L&&(B=C/A);var K=ge({aspectRatio:B,width:F,height:T},"contain");F=K.width,T=K.height;var S=ge({aspectRatio:B,width:j,height:k},"cover");if(j=S.width,k=S.height,L){var R=ge({aspectRatio:B,width:C,height:A},p.resize);C=R.width,A=R.height}else{var xe=ge({aspectRatio:B,width:C,height:A}),fe=xe.width;C=fe===void 0?a:fe;var Z=xe.height;A=Z===void 0?i:Z}C=Math.floor(Tt(Math.min(Math.max(C,j),F))),A=Math.floor(Tt(Math.min(Math.max(A,k),T)));var I=-C/2,ze=-A/2,we=C,ee=A,te=[];if(L){var W=0,pe=0,$=a,re=i,de=ge({aspectRatio:B,width:a,height:i},{contain:"cover",cover:"contain"}[p.resize]);$=de.width,re=de.height,W=(a-$)/2,pe=(i-re)/2,te.push(W,pe,$,re)}if(te.push(I,ze,we,ee),D){var me=[A,C];C=me[0],A=me[1]}b.width=C,b.height=A,rt(p.mimeType)||(p.mimeType=x.type);var V="transparent";if(x.size>p.convertSize&&p.convertTypes.indexOf(p.mimeType)>=0&&(p.mimeType="image/jpeg"),p.mimeType==="image/jpeg"&&(V="#fff"),y.fillStyle=V,y.fillRect(0,0,C,A),p.beforeDraw&&p.beforeDraw.call(this,y,b),!this.aborted&&(y.save(),y.translate(C/2,A/2),y.rotate(o*Math.PI/180),y.scale(l,d),y.drawImage.apply(y,[v].concat(te)),y.restore(),p.drew&&p.drew.call(this,y,b),!this.aborted)){var q=function(De){n.aborted||n.done({naturalWidth:a,naturalHeight:i,result:De})};b.toBlob?b.toBlob(q,p.mimeType,p.quality):q(On(b.toDataURL(p.mimeType,p.quality)))}}},{key:"done",value:function(r){var n=r.naturalWidth,a=r.naturalHeight,i=r.result,s=this.file,o=this.image,c=this.options;if(X&&!c.checkOrientation&&X.revokeObjectURL(o.src),i)if(c.strict&&i.size>s.size&&c.mimeType===s.type&&!(c.width>n||c.height>a||c.minWidth>n||c.minHeight>a||c.maxWidth<n||c.maxHeight<a))i=s;else{var l=new Date;i.lastModified=l.getTime(),i.lastModifiedDate=l,i.name=s.name,i.name&&i.type!==s.type&&(i.name=i.name.replace($n,Rn(i.type)))}else i=s;this.result=i,c.success&&c.success.call(this,i)}},{key:"fail",value:function(r){var n=this.options;if(n.error)n.error.call(this,r);else throw r}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Un,e}},{key:"setDefaults",value:function(r){Ie(Ft,r)}}]),e}();const Hn={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},Nn={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:"100%",height:"100%",padding:4,boxSizing:"border-box"},Kn={display:"flex",justifyContent:"center",minWidth:0,overflow:"hidden",width:"100%"},Vn=se("section")(({theme:e})=>({border:`1px solid ${e.palette.info.main}`,borderRadius:"1.5rem",padding:"1rem",cursor:"pointer",color:e.palette.text.primary,textAlign:"center"})),qn=({files:e,setFiles:t,id:r,name:n,placeholder:a})=>{const{getRootProps:i,getInputProps:s}=Wt({maxFiles:1,accept:{"image/*":[".jpeg",".png"]},onDrop:async c=>{let m=(await Promise.all(c.map(d=>new Promise((x,v)=>{new Wn(d,{quality:.6,success:p=>{x(p)},error:p=>{v(p)}})})))).map(d=>Object.assign(d,{preview:URL.createObjectURL(d)}));t(m)}}),o=e.map(c=>f("div",{style:Nn,children:f("div",{style:Kn,children:f(jt,{alt:c.name,src:c.preview,sx:{width:192,height:192,mx:"auto",mt:"1rem"}})})},c.name));return g.exports.useEffect(()=>()=>{e.forEach(c=>URL.revokeObjectURL(c.preview))},[e]),_(Vn,{children:[_("div",{...i({className:"dropzone"}),children:[f("input",{name:n,id:r,...s()}),f("p",{children:a})]}),f("aside",{style:Hn,children:o})]})},Gn="UserAvatar",Xn={helper:`${Gn}-helper`},Yn=se("form")(({theme:e})=>({width:"100%",display:"flex",flexDirection:"column",gap:"2rem",marginTop:"2rem",marginBottom:"2rem",[`&. ${Xn.helper}`]:{color:e.palette.text.primary}})),Jn=e=>{const{user:t,updateAvatar:r}=g.exports.useContext(Le),n=Be(),a=ke(),[i,s]=g.exports.useState([]),[o,c]=g.exports.useState(!1),[l,m]=g.exports.useState(!1),[d,x]=g.exports.useState(!1),v=async y=>{if(y.preventDefault(),c(!0),!t){a("/",{state:{from:n}});return}try{const D=i[0],L=new File([D],D.name,{lastModified:D.lastModified,type:D.type}),F=new FormData;F.append("avatar",L),await r(F,t==null?void 0:t._id)?m(!0):x(!0)}catch(D){console.error(D),x(!0)}finally{c(!1)}},p=(y,D)=>{D!=="clickaway"&&x(!1)},b=(y,D)=>{D!=="clickaway"&&m(!1)};return _(be,{children:[_(Yn,{onSubmit:v,children:[_(z,{item:!0,xs:12,children:[f(qn,{files:i,setFiles:s,id:"user-avatar",name:"user-avatar",placeholder:"Glisser et d\xE9poser une image ou cliquer pour selectionner une image (formats accept\xE9s: .jpeg et .png)"}),!i[0]&&(t==null?void 0:t.avatar)&&f(jt,{alt:`${t.firstName} ${t.lastName}`,src:t.avatar,sx:{width:192,height:192,mx:"auto",mt:"1rem"}})]}),f(z,{item:!0,xs:12,display:"flex",justifyContent:"end",children:f(Me,{loading:o,disabled:i.length<1,type:"submit",loadingPosition:"start",startIcon:f(it,{}),variant:"contained",color:"info",children:"Enregistrer mon avatar"})})]}),f(oe,{open:l,autoHideDuration:6e3,onClose:b,children:f(ae,{onClose:b,severity:"success",sx:{width:"100%"},children:"Votre avatar a bien \xE9t\xE9 mis \xE0 jour."})}),f(oe,{open:d,autoHideDuration:6e3,onClose:p,children:f(ae,{onClose:p,severity:"error",sx:{width:"100%"},children:"Un probl\xE8me est survenu, veuillez r\xE9essayer."})})]})},si=e=>{const t=ur(),r=nt("(max-width: 900px)");return f(Xt,{Icon:Yt,title:"PARAM\xC8TRES",children:_(z,{item:!0,xs:12,display:"flex",flexDirection:"column",children:[f(Oe,{component:"h1",variant:r?"h4":"h3",sx:{color:t.palette.text.primary},children:"Mes informations"}),f(Er,{}),f(Xe,{}),f(Oe,{component:"h1",variant:r?"h4":"h3",sx:{color:t.palette.text.primary},mt:"2rem",children:"Avatar"}),f(Jn,{}),f(Xe,{}),f(Oe,{component:"h1",variant:r?"h4":"h3",sx:{color:t.palette.text.primary},mt:"2rem",children:"Changer mon mot de passe"}),f(Fr,{}),f(Xe,{}),f(Oe,{component:"h1",variant:r?"h4":"h3",sx:{color:t.palette.text.primary},mt:"2rem",children:"Supprimer mon compte"}),f(Tr,{})]})})};export{si as default};
