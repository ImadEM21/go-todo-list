import{a as o,d as p,j as e}from"./recharts.547c5d9d.js";import{R as C,S as I,t as $}from"./Home.9b7feba0.js";import{u as j,F,A as f}from"./StyledDialog.5638ee45.js";import{c as A,a as h,b as N,P as x,o as R}from"./object.3f15d918.js";import{s as V,L as q,a as z}from"./index.9b5234d1.js";import{L as T,d as k}from"./Save.d7951abd.js";import{T as B}from"./jsx-runtime_commonjs-proxy.f3a4d8a3.js";import"./editor.b46b26d8.js";import"./Box.dbcd5815.js";const v="NewPassword",n={btnContainer:`${v}-btnContainer`,helper:`${v}-helper`},D=V("form")(({theme:i})=>({display:"flex",flexDirection:"column",gap:"2rem",width:"70%",[`& .${n.btnContainer}`]:{display:"flex",flexDirection:"column",gap:".5rem",alignItems:"center",justifyContent:"center"},[`& .${n.helper}`]:{color:i.palette.text.primary}})),K=i=>{var c,u;const{userId:l,token:d}=q(),[w,t]=o.exports.useState(!1),[g,a]=o.exports.useState(!1),[y,m]=o.exports.useState(!1),[S,b]=o.exports.useState(!1),P=A().shape({password:h().required("Le mot de passe est obligatoire").min(6,"Le mot de passe doit contenir au moins 6 caract\xE8res"),confirmPassword:h().required("Le mot de passe est obligatoire").oneOf([N("password")],"Les mots de passe ne sont pas identiques")}),s=j({mode:"onBlur",resolver:R(P)}),E=L=>{if(t(!0),!l||!d){b(!0),t(!1);return}$.resetPassword(l,d,{password:L.password}).then(r=>{m(!0)}).catch(r=>{if(z.isAxiosError(r)){console.error(r.response),a(!0);return}console.error({error:r}),a(!0)}).finally(()=>{t(!1)})};return p(C,{children:[e(I,{variant:"h5",align:"center",children:"R\xE9initialiser mon mot de passe"}),S?e(B,{variant:"h3",children:"Le lien n'est pas valide, veuillez renvoyer le formulaire de r\xE9initialisation de mot de passe"}):e(F,{...s,children:p(D,{onSubmit:s.handleSubmit(E),children:[e(x,{name:"password",color:"info",defaultValue:"",error:s.formState.errors.password!==void 0,errorMessage:(c=s.formState.errors.password)==null?void 0:c.message,fullWidth:!0,id:"reset-password",label:"Nouveau mot de passe"}),e(x,{name:"confirmPassword",color:"info",defaultValue:"",error:s.formState.errors.confirmPassword!==void 0,errorMessage:(u=s.formState.errors.confirmPassword)==null?void 0:u.message,fullWidth:!0,id:"confirm-reset-password",label:"Confirmez le nouveau mot de passe"}),g&&e(f,{onClose:()=>{a(!1)},severity:"error",children:"Une erreur est survenue, veuillez r\xE9essayer."}),y&&e(f,{onClose:()=>{m(!1)},severity:"success",children:"Votre mot de passe a bien \xE9t\xE9 mis \xE0 jour."}),e("div",{className:n.btnContainer,children:e(T,{loading:w,loadingPosition:"start",startIcon:e(k,{}),variant:"contained",color:"info",type:"submit",children:"Valider le nouveau mot de passe"})})]})})]})};export{K as default};
